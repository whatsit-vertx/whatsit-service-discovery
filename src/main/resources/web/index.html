<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Service Discovery</title>
    <script th:inline="javascript">
        const loc = window.location;
        let path
        if (loc.protocol === "https") {
            path = "wss://";
        } else {
            path = "ws://"
        }

        const params = new URLSearchParams({
            isUI: "true",
            key: [[${key}]]
        });

        path = path + loc.host + "/discovery?" + params.toString();

        let ws = new WebSocket(path);

        ws.onopen = function () {
            console.log("Connect to " + path)
        };

        ws.onclose = function () {
            console.log("Closed Connection with " + path)
        };
    </script>
</head>
<body>

</body>
</html>
